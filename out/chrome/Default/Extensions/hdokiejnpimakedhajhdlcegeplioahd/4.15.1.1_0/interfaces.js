Interfaces=function(){var t=function(t,n){this.type=t,this.options=n,this.options&&(this.options.include&&(this.options.include=[].concat(this.options.include)),this.options.exclude&&(this.options.exclude=[].concat(this.options.exclude)))};t.prototype.requiredBy=function(t){var n;if(t&&this.options){if(this.options.include){for(n=0;n<this.options.include.length;++n)if(this.options.include[n]===t)return!0;return!1}if(this.options.exclude){for(n=0;n<this.options.exclude.length;++n)if(this.options.exclude[n]===t)return!1;return!0}}return!0},t.prototype.isSyncronized=function(){return this.options&&!0===this.options.sync},t.prototype.isSyncronousFunction=function(){return this.type===Interfaces.TYPE_SYNC_FUNCTION},t.prototype.isFunction=function(){return this.type===Interfaces.TYPE_FUNCTION||this.type===Interfaces.TYPE_SYNC_FUNCTION},t.prototype.isConstructor=function(){return this.type===Interfaces.TYPE_CONSTRUCTOR},t.prototype.isPrimitive=function(){return!this.isFunction()&&!this.isConstructor()},t.prototype.shouldSendIndirect=function(){return this.isPrimitive()?!this.options||void 0===this.options.sendIndirect||this.options.sendIndirect:this.options&&!0===this.options.sendIndirect},t.prototype.allowWrite=function(){return this.options&&!0===this.options.write},t.prototype.addIncludes=function(t){this.options=this.options||{},this.options.include=this.options.include.concat(t)};var n,o,i,e,r,c,s,u=(n=function(t,n,o,i){return function(){var e=arguments;if(i.cloneObjects&&!t.isSyncronousFunction()){var r=function(t){return t?(Array.isArray(t)?(n=[],t.forEach(function(t){"object"==typeof t?n.push(r(t)):n.push(t)})):(n={},Object.keys(t).forEach(function(o){t[o]&&"object"==typeof t[o]?n[o]=r(t[o]):n[o]=t[o]})),n):null;var n};e=Array.prototype.map.call(e,function(t){return"object"==typeof t?r(t):t})}return o.apply(n,e)}},o=function(t,n,o){if("function"==typeof o.requestFunction)return function(){for(var i=[],e=0,r=arguments.length;e<r;++e)i.push(arguments[e]);return o.requestFunction({cmd:t.length>0?t.concat(n):n,args:i})};throw"requestFunction must be specified for this interface since it is not direct access."},i=function(t,n,o){return function(){"function"==typeof n&&n.apply(t,arguments),"function"==typeof o&&o.apply(t,arguments)}},e=function(r,c,s,u,f,a){var p,h,l,d,y,v,F,P=!1,T=[];for(var I in u){var O=u[I];O instanceof t?O.isFunction()?!O.requiredBy(a.context)||O.isSyncronousFunction()&&a.asyncOnly||(a.direct||O.isSyncronousFunction()?c&&"function"==typeof c[I]?(r[I]=n(O,c,c[I],a),!a.direct&&O.shouldSendIndirect()&&(r[I]=i(r,r[I],o(f,I,a)))):T.push(O.type+": "+f.concat(I).join(".")):r[I]=o(f,I,a)):O.isConstructor()?O.requiredBy(a.context)&&!a.asyncOnly&&(c&&"function"==typeof c[I]?r[I]=c[I]:T.push(O.type+": "+f.concat(I).join("."))):P=!0:(r.hasOwnProperty(I)||(r[I]={}),e(r[I],c?c[I]:c,s?s[I]:s,u[I],f.concat(I),a))}if(P&&(r.get=(v=s,F=u,function(t){if(F.hasOwnProperty(t))return v[t];throw t+" is not defined in the interface."}),r.set=(p=s,h=u,l=f,y=function(t,n,o){if(!t.allowWrite())throw l.concat(n)+" is not writeable.";if(!t||typeof o!==t.type)throw n+" is not defined in the interface.";p[n]=o},(d=a).direct?function(t,n){var o=h[t];y(o,t,n)}:function(t,n){var o=h[t];y(o,t,n),o.shouldSendIndirect()&&d.requestFunction({cmd:"LPData.setValue",args:[l.concat(t),n]})})),T.length>0&&a.checkMissing)throw"Background instance does not support the following:\n"+T.join("\n");return r},function(t,n){return e(n.instance||{},n.source||n.sourceFunctions,n.source||n.sourceData,t,[],n)}),f=(r={},c={},s=function(n,o,i,e){var r=[];for(var c in n){var u=e?e.concat(c):[c],f=n[c];f instanceof t?f.isPrimitive()&&f.requiredBy(o)&&(!i||f.isSyncronized())&&r.push({sourceFunction:f.options&&f.options.sourceFunction,path:u}):r=r.concat(s(f,o,i,u))}return r},function(t,n){var o=[];t=[].concat(t);for(var i=0;i<t.length;++i){var e,u=t[i];n.syncronizedOnly?void 0===(e=c[u])&&(e=c[u]=s(n.interface,u,!0)):void 0===(e=r[u])&&(e=r[u]=s(n.interface,u,!1)),o=o.concat(e)}return o});return{TYPE_CONSTRUCTOR:"contsructor",TYPE_SYNC_FUNCTION:"synchronous function",TYPE_FUNCTION:"function",TYPE_STRING:"string",TYPE_BOOLEAN:"boolean",TYPE_NUMBER:"number",TYPE_OBJECT:"object",Definition:t,extend:function(t,n){for(var o in n){var i=n[o];switch(typeof i){case"object":t.hasOwnProperty(o)?Interfaces.extend(t[o],i):t[o]=i;break;default:t[o]=i}}},createInstance:u,getPrimitives:function(t){var n={};if(t.context)for(var o=f(t.context,t),i=0,e=o.length;i<e;++i){var r,c=o[i];r=c.sourceFunction?"function"==typeof c.sourceFunction?c.sourceFunction():LPReflection.callFunction(null,c.sourceFunction,[],{context:t.source}):LPReflection.getValue(t.interface,c.path,{context:t.source}),LPReflection.setValue(null,c.path,r,{context:n})}return n},clearPrimitives:function(t){if(t.context)for(var n=f(t.context,t),o=0;o<n.length;++o)LPReflection.setValue(null,n[o].path,null,{context:t.source})},getName:function(t){for(var n in this)if(t===this[n])return n;throw new Error("Could not find interface name.")}}}();
//# sourceMappingURL=sourcemaps/interfaces.js.map
