var LPModule;!function(t){setTimeout(function(){t.initialize(),t.postInitialize()})}(LPModule||(LPModule={})),function(t){var i;(i=t.ServiceType||(t.ServiceType={})).BasicAuth="BasicAuth",i.FormParser="FormParser",i.SiteParser="SiteParser",i.StringUtils="StringUtils"}(LPModule||(LPModule={})),function(t){var i=new(function(){function t(){this.constructors={},this.services={}}return t.prototype.register=function(t,i){this.constructors[t]=i},t.prototype.initialize=function(){var t=this;Object.keys(this.constructors).forEach(function(i){return t.services[i]=new t.constructors[i]}),Object.keys(this.services).forEach(function(i){return t.services[i].initialize()})},t.prototype.getService=function(t){return this.services[t]},t}());t.getService=function(t){return i.getService(t)},function(t){t.initialize=function(){i.initialize()},t.register=function(t,n){i.register(t,n)}}(t.Services||(t.Services={}))}(LPModule||(LPModule={})),function(t){var i,n,e;i=t.Services||(t.Services={}),n=i.Utils||(i.Utils={}),e=function(){function t(){}return t.prototype.initialize=function(){},t.prototype.stringContains=function(t,i){if(t&&i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;++n)if(t.indexOf(i[n])>-1)return!0}return!1},t}(),n.StringUtilsService=e}(LPModule||(LPModule={})),function(t){t.initialize=function(){},t.postInitialize=function(){window.basicAuth=new t.Views.BasicAuth.BasicAuthView}}(LPModule||(LPModule={})),function(t){var i,n,e;i=t.Views||(t.Views={}),n=i.BasicAuth||(i.BasicAuth={}),e=function(){function t(){var t=this;bg.basicAuth.hasFeature(function(i){i&&bg.basicAuth.isBasicAuth(function(i,n){return t.init(i,n)})})}return t.prototype.init=function(t,i){var n=this;t&&(this.backgroundInterface=bg,this.loadContent(function(){n.initContent(i)}))},t.prototype.loadContent=function(t){var i=this;$.get(chrome.runtime.getURL("/content-script/views/basic-auth/basic-auth.html"),function(n){var e=i.replaceRelativePaths(n);$(document.body).empty().append(e),t()})},t.prototype.initContent=function(t){$("#ba_username").focus(),t||$("#wronguserpass").hide(),document.title="Lastpass basic auth login",$("#title").text(location.host),"http:"===location.protocol?$("#secureWarning").show():$("#secureWarning").hide(),this.subscribeEvents(),this.openPopupNotification(),this.backgroundInterface.sendLpImprove("basicauth::triggered")},t.prototype.subscribeEvents=function(){var t=this;$("#lp-login-btn").click(function(){$(".js-notification").toggle("notification-visible"),t.doLogin()}),$("#password").keypress(function(i){13===i.which&&t.doLogin()}),$("#lp-cancel-btn").click(function(){t.cancelBasicAuth(),t.backgroundInterface.sendLpImprove("basicauth::cancel")}),$(".notification__close__button").click(function(){$(".notification__body").removeClass("slide-in").addClass("slide-out"),t.backgroundInterface.basicAuth.closeNotification()})},t.prototype.doLogin=function(){var t=$("#ba_username").val(),i=$("#ba_password").val();this.backgroundInterface.sendLpImprove("basicauth::login"),this.backgroundInterface.basicAuth.setAuthCredential(t,i,function(){return location.reload()})},t.prototype.cancelBasicAuth=function(){this.backgroundInterface.basicAuth.cancelBasicAuth(),$("#login-body").hide(),location.reload()},t.prototype.replaceRelativePaths=function(t){var i=chrome.runtime.getURL("");return t.replace(new RegExp("{extensionUrl}","g"),i)},t.prototype.openPopupNotification=function(){this.backgroundInterface.basicAuth.isNotificationClosed(function(t){t?$(".notification__body").hide():$(".notification__body").addClass("slide-in")})},t}(),n.BasicAuthView=e}(LPModule||(LPModule={}));
//# sourceMappingURL=sourcemaps/modules-contentscript.js.map
