var IntroTourDialog=function(t,e,i,o,n){"use strict";var s=function(t){o.call(this,t,{closeButtonEnabled:!1,maximizeButtonEnabled:!1,dynamicHeight:!0,hideHeader:!0,hideButtons:!0,confirmOnClose:!1,buttonsInsideContent:!0,isModal:!1}),s.prototype._arrow=null,s.prototype._options=null};function r(t,e,i,o,n){var s=0;switch(t){case"top":case"left":s=e?i:i+o;break;case"right":case"bottom":s=e?i+o-n:i-n}return s}function a(t,e,i,o,n){var s=0;switch(t){case"top":case"left":s=e;break;case"right":case"bottom":s=e+i-n;break;case"center":default:s=o-Math.round(n/2)}return s}return s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.createButton=function(e,i,o,n){if(e&&i){var s=i.style||"",r=i.sizeStyle||"col-6",a=t("<div></div>").addClass(r).append(t("<button></button>").text(i.text).data("index",o).addClass("btn-base radius-sm "+s).off().on("click",n));e.append(a)}},s.prototype.setup=function(s,r){if(r&&r.options&&r.flow){var a=this;a._options=t.extend({title:i.translateString("Tour Title here")},r.options);var l=a.$element.find(".buttons").empty();a.$element.removeClass().addClass("dialog responsive intro-tour-dialog"),a._options.class&&a.$element.addClass(a._options.class);for(var p=function(t){t&&("string"==typeof t?r.flow.executeAction(t):t.event&&r.flow.executeAction(t.event,t.params))},h=0;h<a._options.buttons.length;h++){this.createButton(l,a._options.buttons[h],h,function(e){e.preventDefault(),r.flow.closeCurrentStep();var i=t(e.target).data("index");if(t.isNumeric(i)&&i>=0&&i<a._options.buttons.length){var o=a._options.buttons[i];if(o.action&&Array.isArray(o.action))for(var n=0;n<o.action.length;n++)p(o.action[n]);else p(o.action)}})}var c=s.find("#btnClose");if(a._options.hideXCloseBtn)c.hide();else{c.off().on("click",function(t){t.preventDefault(),r.flow.closeCurrentStep(),a._options.exitAction&&r.flow.executeAction(a._options.exitAction)})}this.setText(this._options.title,this.$element.find("#mainTitle"));var d="function"==typeof this._options.contentText1?this._options.contentText1():this._options.contentText1;this.setText(d,this.$element.find("#contentText1"));var g="function"==typeof this._options.contentText2?this._options.contentText2():this._options.contentText2;if(this.setText(g,this.$element.find("#contentText2")),a._options.contentImage&&a._options.contentImage.src){var f=t("<img>").addClass(a._options.contentImage.style).attr("src",a._options.contentImage.src),u=s.find("#contentSection1");"after"===a._options.contentImage.placement?u.append(f):u.prepend(f)}if(a._options.contentLink&&a._options.contentLink.href&&a._options.contentLink.text){var m=t("<a>").addClass(a._options.contentLink.style).attr("target","_blank").attr("href",a._options.contentLink.href).text(a._options.contentLink.text);s.find("#contentSection2").append(m)}o.prototype.setup.apply(this,arguments),this.setSize(this._options.position),this.setPosition(this._options.position),this._options.position&&this._options.position.arrowPosition?(this._arrow=this._arrow||new e({$parentEl:this.$element,arrowClass:"arrow-box a-white"}),this._arrow.show(this._options.position.orientation,this._options.position.arrowPosition)):this._arrow&&this._arrow.hide(),this.$overlayDialogEl=t("#dialogOverlay"),this.$overlayDialogEl&&this.$overlayDialogEl.length>0&&this.$overlayDialogEl.detach(),this.subscribeToWindowResize()}n.get(n.INTRO_TOURS_LOADED).publish()},s.prototype.setText=function(t,e){t&&e?e.text(t).show():e.hide()},s.prototype.setPosition=function(e){e.dialogPosition=null,e&&e.targetId&&(e.$targetEl=t(e.targetId),e.targetDimensions=this.getDimensions(e.$targetEl),e.dialogPosition=this.computeDialogPosition(this.$element,e)),e.dialogPosition&&this.$element.offset(e.dialogPosition)},s.prototype.setSize=function(e){if(e){e.$targetEl=t(e.targetId);var i,o=this.getDimensions(e.$targetEl);e.fillWidth?(i=t(e.fillWidth))&&i.length>0?this.$element.width(i.width()):this.$element.width(o.width):this.$element.css("width",""),e.fillHeight?(i=t(e.fillHeight))&&i.length>0?this.$element.height(i.height()):this.$element.height(o.height):this.$element.css("height","")}},s.prototype.subscribeToWindowResize=function(){var t=this;t.positionAndResizeHandler=function(){t.setSize(t._options.position),t.setPosition(t._options.position)},window&&window.addEventListener("resize",t.positionAndResizeHandler),n.get(n.VAULT_LEFT_MENU_TOGGLE).subscribe(t.positionAndResizeHandler),n.get(n.EMPTY_VAULT_STATE_CHANGE).subscribe(t.positionAndResizeHandler)},s.prototype.unSubscribeToWindowResize=function(){var t=this;"function"==typeof t.positionAndResizeHandler&&(n.get(n.VAULT_LEFT_MENU_TOGGLE).unsubscribe(t.positionAndResizeHandler),n.get(n.EMPTY_VAULT_STATE_CHANGE).unsubscribe(t.positionAndResizeHandler),window&&(window.removeEventListener&&window.removeEventListener("resize",t.positionAndResizeHandler),t.positionAndResizeHandler=null))},s.prototype.computeDialogPosition=function(t,e){if(t&&t.length>0&&e&&e.$targetEl.length>0){var i=e.arrowPosition?15:0;e.dialogDimensions=this.getDimensions(t);var o={top:0,left:0},n=e.align||"center";switch(e.orientation){case"top":o.left=a(n,e.targetDimensions.left,e.targetDimensions.width,e.targetDimensions.center.left,e.dialogDimensions.width),o.top=r(e.orientation,e.inside,e.targetDimensions.top,e.targetDimensions.height,e.dialogDimensions.height)+i;break;case"bottom":o.left=a(n,e.targetDimensions.left,e.targetDimensions.width,e.targetDimensions.center.left,e.dialogDimensions.width),o.top=r(e.orientation,e.inside,e.targetDimensions.top,e.targetDimensions.height,e.dialogDimensions.height)-i;break;case"left":o.top=a(n,e.targetDimensions.top,e.targetDimensions.height,e.targetDimensions.center.top,e.dialogDimensions.height),o.left=r(e.orientation,e.inside,e.targetDimensions.left,e.targetDimensions.width,e.dialogDimensions.width)+i;break;case"right":o.top=a(n,e.targetDimensions.top,e.targetDimensions.height,e.targetDimensions.center.top,e.dialogDimensions.height),o.left=r(e.orientation,e.inside,e.targetDimensions.left,e.targetDimensions.width,e.dialogDimensions.width)-i}return e.offset&&(o.top+=e.offset.top,o.left+=e.offset.left),o}return null},s.prototype.getDimensions=function(e){if(e&&e.length>0){var i=t.extend({height:e.height(),width:e.width()},e.offset());return i.center={top:Math.round(i.top+i.height/2),left:Math.round(i.left+i.width/2)},i}return null},s.prototype.close=function(t){t&&(o.prototype.close.apply(this,arguments),this.unSubscribeToWindowResize())},s.prototype.showBlurOverlay=function(){},s.prototype.hideBlurOverlay=function(){},s.prototype.closeOnSuccess=function(){},s.prototype.getZIndex=function(){var t=this.$element.css("z-index");if("auto"===t)return 0;var e=parseInt(t);return e<8?8:e},s}(jQuery,lpArrow,Strings,Dialog,Topics);
//# sourceMappingURL=sourcemaps/Tour/introTourDialog.js.map
