!function(t){"use strict";var e=function(e){bg.IntroTutorial.getState(function(o){if(o.enabled&&document.location.host.toLowerCase().includes(o.domain)){var i=o.isInContext?t.InContextIntroTutorialDialogOptions:t.VaultIntroTutorialDialogOptions;e(o,i)}})};Topics.get(Topics.SITE_NOTIFICATION_STATE).subscribe(function(t){var o=null;function i(t){o&&t&&LPFrame.css({id:o.getDialogID(),css:{top:t.top+45,left:t.left+t.infieldOffset+25}})}function n(t){o?(Topics.get(Topics.INFIELD_FRAME_POSITION_CHANGED).unsubscribe(i),bg.IntroTutorial.getState(function(e){"add_first_site"!==e.inContextOnboardingStep&&(o.close(!0),o=null,t&&t())})):t&&t()}e(function(t,e){var i=LPSiteService.getSite(t.domain);if(i.isLoggedIn(document)){if(bg.IntroTutorial.setState({firstLogin:!1}),0===LPFrame.numberOfDialogs()&&(o=t.isLoginTheLastPassWay?LPFrame.openDialog(e.name,{addHide:!0,textChoice:"loginTheLastPassWay",arrow:i.showArrow()?e.getArrowOptions():i.showArrow()},{css:e.getCssOptions()}):LPFrame.openDialog(e.name,{addHide:!0,textChoice:"siteLanding",arrow:i.showArrow()?e.getArrowOptions():i.showArrow()},{css:e.getCssOptions()}))){var n=e.getTrackElementOptions();n.element=i.getTrackingEl(document),o.trackElement(n)}}else t.firstLogin?i.logMeOut(document,e.name):t.isAllSet&&bg.IntroTutorial.completeTutorial({textChoice:"completed"})}),Topics.get(Topics.SITE_NOTIFICATION).subscribe(function(o){var i=bg.get("LPContentScriptFeatures").ezpass_test?"saveSiteEzPass":"saveSite";e(function(e,n){bg.IntroTutorial.setState({inContextOnboardingStep:"add_site_to_lastpass"}),setTimeout(function(){LPFrame&&LPFrame.numberOfDialogs()>1&&LPFrame.close(1),bg.sendLpImprove("onboardingtour::displayed_onboarding_save_a_site",{version:"incontext"});var e=window.location.hostname;t&&t.defaultData&&t.defaultData.name&&(e=t.defaultData.name),o.getInterface().LPDialog.openDialog(n.name,{addHide:!0,siteName:e,textChoice:i,parentDialog:"contentScriptSite",css:{position:"absolute",top:"100%","margin-top":"10px","margin-right":0,right:0},arrow:{orientation:"top",positionTarget:"#submit"}})},1e3)})}),Topics.get(Topics.INFIELD_NOTIFICATION_OPENED).subscribe(function(t){e(function(e,a){n(function(){var n=e.inContextOnboardingStep;n&&"add_first_site"!==n&&(o=LPFrame.openDialog(a.name,{addHide:!0,textChoice:"selectYourSite",arrow:a.getArrowOptions()},{css:{width:"auto",height:"auto","min-width":"168px"}})),Topics.get(Topics.INFIELD_FRAME_POSITION_CHANGED).subscribe(i),i(t)})})}),Topics.get(Topics.INFIELD_NOTIFICATION_FILLED).subscribe(function(){e(function(t,e){t.enabled&&(bg.IntroTutorial.setState({isLoginTheLastPassWay:!1}),bg.IntroTutorial.completeTutorial({textChoice:"completed",siteName:t.domain}))})}),Topics.get(Topics.INFIELD_NOTIFICATION_CLOSED).subscribe(function(){e(function(t,e){n()})})})}(IntroTutorialDialogOptions);
//# sourceMappingURL=sourcemaps/IntroTutorial/introTutorialContentScript.js.map
