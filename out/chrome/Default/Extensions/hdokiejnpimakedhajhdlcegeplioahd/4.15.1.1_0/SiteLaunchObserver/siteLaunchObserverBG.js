SiteLaunchObserver=function(t){var a={},e=!1;function i(t,e,i){a[t]&&!a[t].launchedSite&&(clearTimeout(a[t].timeout),delete a[t]),a[t]=new function(){this.acc=null,this.launchedSite=!1,this.formSubmitted=!1,this.userInteraction=!1,this.hasFormWithPassword=!1,this.formData=null,this.formDisappeared=!1,this.timeout=null,this.timedout=!1},a[t].acc=e,a[t].timeout=setTimeout(function(){var e=a[t];e&&(e.formSubmitted?(e.formDisappeared=!0,o(t,"Form disappeared")):(e.timedout=!0,o(t,"Timeout")))},1e3*i)}function o(e,i){var o,r=a[e];r&&(r.launchedSite?t("SiteLaunchAttempt",{URL:r.acc.url,DOMAIN:r.acc.tld,FORM_FOUND:r.hasFormWithPassword,FORM_SUBMITTED:r.formSubmitted,USER_SUBMIT:r.userInteraction,FORM_DISAPPEARED:r.formDisappeared,TIMEDOUT:r.timedout}):t("infield_login_attempt",{url:r.acc.url,domain:r.acc.tld,form_found:r.hasFormWithPassword,form_submitted:r.formSubmitted,form_disappeared:r.formDisappeared,timedout:r.timedout}),(o=r).hasFormWithPassword=!!o.formData||o.hasFormWithPassword,n(o.acc," Tracking Results:"),n(o.acc," FormFound: "+o.hasFormWithPassword),n(o.acc," FormSubmitted: "+o.formSubmitted),n(o.acc," FormDisappeared: "+o.formDisappeared),n(o.acc," UserInteraction: "+o.userInteraction),n(o.acc," TimedOut: "+o.timedout),clearTimeout(r.timeout),delete a[e])}function r(t){var e=a[t.tabID];e&&LPTabs.get({tabID:t.tabID}).forEachWindow({each:function(a,i){return a.LaunchTracking.formExists(e.formData,function(a){a&&o(t.tabID)})}})}function n(t,a){e&&console.log("%cApp: "+t.name+"%c "+a,"color: white; background: green","color: blue")}return{isFeatureEnabled:function(t,a){t(g_launch_site_tracking_enabled)},startLaunchSite:function(t,e){i(t,e,15),a[t].launchedSite=!0,n(a[t].acc,"Launched")},startFillTracking:function(t,e){i(t,e,15),n(a[t].acc,"Filled")},formSubmitted:function(t,e){if(a[e.tabID]){a[e.tabID].formData=t,a[e.tabID].formSubmitted=!0,a[e.tabID].userInteraction=t.userSubmit,r(e);var i=t.id?t.id:t.name;n(a[e.tabID].acc,"Form("+i+") submitted.")}},getSubmitState:function(t,e){t(a[e.tabID]&&a[e.tabID].formSubmitted)},initiateFormExists:function(t){var e=a[t.tabID];e&&e.formSubmitted&&r(t)},hasFormWithPassword:function(t){a[t.tabID]&&(a[t.tabID].hasFormWithPassword=!0,n(a[t.tabID].acc,"Form with password input found"))}}}(sendLpImprove);
//# sourceMappingURL=sourcemaps/SiteLaunchObserver/siteLaunchObserverBG.js.map
