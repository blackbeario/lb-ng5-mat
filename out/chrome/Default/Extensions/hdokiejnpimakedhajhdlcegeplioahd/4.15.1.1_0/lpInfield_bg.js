var InfieldCommands=function(){var e={};return{getPopupFillData:function(i,r){var n=function(e,i){var r=[],n={},o={},a="",s="",l="",f="",c=new Array,d=new Array,u={};i||(i=lp_gettld_url(e));r=getsites(i),r=reorderOnURL(r,e,!0);for(var g=0;g<r.length;g++)n[r[g].aid]=geticonurlfromrecord(r[g]),u[r[g].aid]=getbigsquareiconurlfromrecord(r[g]);var p=LPJSON.stringify("");if(LPContentScriptFeatures.omaria){notekeys=Object.keys(g_securenotes);for(var _=0;_<notekeys.length;_++)check_ident_aid(g_securenotes[notekeys[_]].aid)&&(fillableNoteTypes.indexOf(g_securenotes[notekeys[_]].notetype)>-1||"Custom_"===g_securenotes[notekeys[_]].notetype.substring(0,7))&&(d[_]=addUserFriendlyDescription(g_securenotes[notekeys[_]]),d[_].language=t(d[_]));d&&d.length>0&&(p=LPJSON.stringify(d))}else{for(var m=0;m<g_formfills.length;m++)if(check_ident_ffid(g_formfills[m].ffid)){c[c.length]=g_formfills[m];var y=lpmdec_acct(g_formfills[m].ccnum,!0,g_formfills[m],g_shares);if(n[g_formfills[m].ffid]=geticonCCnum(y),u[g_formfills[m].ffid]=geticonCCnum(y,!0),""!==g_formfills[m].ccnum){var v=lpmdec(g_formfills[m].ccnum);c[c.length-1].description=LPCC.getFormattedNumber(v),c[c.length-1].ccType=LPCC.getCCType(v)}}c&&c.length>0&&(p=LPJSON.stringify(c))}f=cache_usernames(r),a=p,s=LPJSON.stringify(n),g_40fieldicon&&(l=LPJSON.stringify(u));f&&(o.sites=f);a&&(o.formfills=a);s&&(o.favicons=s);l&&(o.bigicons=l);return o}(r.tabURL),o=function(t){var i=e[t]||{};for(var r in i)if(i.hasOwnProperty(r)&&i[r].isActive)return i[r]}(r.tabID);i({url:r.tabURL,fillData:{sites:n.sites,formFills:n.formfills,favIcons:n.favicons,bigIcons:n.bigicons},domPath:o.domPath,fieldID:o.fieldID,fieldType:o.fieldType,type:o.type,save:o.save,generate:1===o.generate,canCopyToClipboard:can_copy_to_clipboard(),userName:g_username,condensedDropdown:LPContentScriptFeatures.omar_infield_b,noHeaders:LPContentScriptFeatures.omar_infield_c})},setActiveFormData:function(t,i){var r=e[i.tabID]||{};for(var n in r)r.hasOwnProperty(n)&&(r[n].isActive=!1);r[t.active]={isActive:!0,domPath:t.active,fieldID:t.activefieldid,fieldType:t.activefieldtype,type:t.start_type,save:t.opentosave,generate:t.ask_generate},e[i.tabID]=r},copyPassword:function(e,t,i,r){sendLpImprove("copypass",{domain:get_record(e).url,url:r.tabURL,source:"formv2",action:"sitepassword"}),sendLpImprove("sitelogin",{copy:1,shareType:getShareType(e),autologin:0,source:"formv2"}),copypassword(e,null,t?1:0,r.tabID)},copyUserName:function(e,t,i){copyusername(e,t?1:0,i.tabID)},copyUrl:function(e,t,i){copyurl(e,t?1:0,i.tabID)},copyProp:function(e,t,i,r,n){copyprop(e,t,i?1:0,void 0,void 0,r)},getGeneratePasswordPrefs:function(e,t){e(do_popupfillgetgenerateprefs(t.tabID))},setGeneratePasswordPrefs:function(e,t){do_popupfillsetgenerateprefs(t.tabID,e)},searchVault:function(e,t,i,r){i(do_searchvault(e,t,r.tabID))},searchVaultAll:function(e,t,i,r){i(function(e,t,i){e&&(e=e.toLowerCase().trim());var r={},n={},o="",a=g_popup_url_by_tabid[i];a&&(o=lp_gettld_url(a));for(var s in g_sites)!check_ident_aid(g_sites[s].aid)||g_sites[s].tld!==o||e&&-1===g_sites[s].name.toLowerCase().indexOf(e)&&-1===g_sites[s].unencryptedUsername.toLowerCase().indexOf(e)||(r[s]=g_sites[s],g_sites[s].tld&&g_bigsquareicons[g_sites[s].tld]&&(n[s]="data:image/png;base64,"+g_bigsquareicons[g_sites[s].tld]));for(var l=Object.keys(g_securenotes),f=new Array,c=0;c<l.length;c++)check_ident_aid(g_securenotes[l[c]].aid)&&fillableNoteTypes.indexOf(g_securenotes[l[c]].notetype)>-1&&-1!==g_securenotes[l[c]].decprofilename.toLowerCase().indexOf(e)&&(f[c]=addUserFriendlyDescription(g_securenotes[l[c]]));return JSON.stringify({sites:r,bigicons:n,formfills:f})}(e,0,r.tabID))},fillGeneratedPassword:function(e,t,i,r){LPTabs.get({tabID:r.tabID}).forEachWindow({each:function(t,n){return t.LPInfieldFrame.fillGeneratedPassword(r.tabURL,e,i)}}),t.url=r.tabURL,t.action="formfill",sendLpImprove("genpassword",t)},fillUserData:function(e,t,i){!function(e,t,i){if(!(lploggedin&&null==grid_getdata("active")||skiplogin()))return!1;if(g_last_launch[t]=(new Date).getTime(),void 0!==g_sites[t]){var r=!0,n=get_record(t);return i&&!n.save_all&&(r=!0),g_fillfield_confirm_perfield={},fill({tabid:e,acct:g_sites[t],docid:null,submit:!1,doconfirm:!0,docnum:"all",allowforce:!0,skip_pwprotect:!1,manualfill:r,automaticallyFill:null,skip_basicauth:null,from_iframe:i,desc:"autofillaid",source:"notrack"}),!0}}(i.tabID,e,t),sendLpImprove("sitelogin",{copy:0,shareType:getShareType(e),autologin:0,source:"formv2"})},editFormFill:function(e,t){LPContentScriptFeatures.omaria?openeditsecurenote(e):editprofile(e,null,t)},fillForm:function(e,t,i,r){var n=null;if(t)if(frame_and_topdoc_has_same_domain(r.tabID))LPContentScriptFeatures.omaria&&(n=!0);else{if(ftd_report_error(r.tabID,"fillform"),!lpConfirmYesNo(gs("Are you sure you want LastPass to fill your information into this site:")+"\n\n"+lp_gettld_url(ftd_get_frameparenturl(r.tabID))))return!1;n=!0}LPContentScriptFeatures.omaria?fillitem(e,null,null,t,n,i):fillform(e,null,null,null,t,n,i)},editSite:function(e){editAid(e)},canCopy:function(e){"function"==typeof e&&e(can_copy_to_clipboard())}};function t(e){var t=lpmdec(e.extra,!0),i=/Language:(.+)/.exec(t);return i&&i.length>1?i[1]:"en-US"}}();
//# sourceMappingURL=sourcemaps/lpInfield_bg.js.map
